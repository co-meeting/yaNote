# yaNote

**yaNote** は、ブラウザ上で動作するジグザグ型ノートアプリです。  
ノード（メモ）を作成し、それらを自由に接続することで、情報を視覚的に整理できます。

📌 **[デモページ（GitHub Pages）](https://co-meeting.github.io/yaNote/)**  
👉 **ブラウザで今すぐ試せます！**  

📖 **[ヘルプページ](help.md)**  
👉 **使い方の詳細はこちら！**  

---

## 🚀 アップデート情報 (v1.2.9)

### 主な変更点
- **ノード種類の拡張**
  - v1.2.8 では「標準」と「テキスト専用」の2種類のみでしたが、v1.2.9 では新たに **「グレー」** と **「赤」** のノードを追加しました。
  - すべてのノードは単一の `nodeType` プロパティで管理され、背景色、文字色、枠線がタイプごとに定義されます。

- **接続線の色統一**
  - すべての接続線および矢印マーカーの色が **#404040** に統一され、全体のデザインに一貫性をもたらします。

- **UI の改善**
  - ノード変更ボタンが青色の強調ではなく、現在のノードタイプ（標準 / テキスト専用 / グレー / 赤）を視覚的に表示するように変更。
  - Shift キーを押しながらのクリックで複数のノードを選択できるようになりました。

---

## 📌 機能比較

| 機能                   | v1.2.8                                   | v1.2.9                                             |
|----------------------|-----------------------------------------|---------------------------------------------------|
| **ノード種類**         | 標準, テキスト専用                         | **標準, テキスト専用, グレー, 赤** 🆕                  |
| **接続線の色**         | 各接続線/矢印で色が個別に設定（例: #000）      | **全接続線および矢印マーカーが #404040 に統一** 🆕      |
| **ノード変更ボタン**     | 青色の強調表示                              | **現在のノードタイプをボタン自体の色で表示** 🆕         |
| **複数選択**           | 単一選択のみ                                | **Shift+クリックで複数選択可能** 🆕                   |
| **その他の機能**        | 基本的なノード作成・編集・接続・削除が可能         | 基本機能は継続、UI/UX 向上のための改善が加えられています 🆕 |

---

## 📌 主な機能

### 📝 ノードの作成・編集
- **ダブルクリックでノードを作成**
- **Enter キー 2 回押下で編集完了**
- **Shift+Enter で複数行テキスト入力**
- **ドラッグでノードを移動可能**
- **ノードの種類を切り替え可能**
  - v1.2.9 では「標準」「テキスト専用」「グレー」「赤」から選択
- **太字機能で重要ポイントを強調**

### 📍 ノードの接続
- **ドラッグ＆ドロップでノード同士を接続**
- **未接続の線を自由に移動可能**
- **接続線の端点をドラッグして再接続可能**
- **線種を切り替え可能（複数のアイコン表示）**
- **実線/点線の切り替えが可能**

### 🎯 選択と削除
- **クリックで選択**
- **Shift+クリックで複数選択**
- **Delete/Backspace で削除**
- **右クリックメニューからも削除可能**
- **ラバーバンド選択対応（ドラッグで範囲選択）**

### 🔄 Undo / Redo
- **Ctrl+Z/Cmd+Z** → 元に戻す
- **Ctrl+Y/Cmd+Y** → やり直し

### 🔀 エクスポート・インポート機能
- **ノードと接続情報を JSON 形式でエクスポート**
- **ノードの種類、線種、太字設定もエクスポート時に保存**
- **エクスポート時にファイル名に日付を含む**
- **インポートにより、以前のデータを復元**
- **古いバージョンのデータ自動マイグレーション**
- **ローカルストレージによる自動保存**
- **複数タブ間のデータ同期対応**

### 🖱️ 直感的な操作
- **右クリックでコンテキストメニュー**
- **右クリック＋ドラッグでパン移動**
- **マウスホイール、シフト＋ホイールでパン移動**
- **ツールチップによる操作説明**

---

## 🛠 技術詳細

- **言語**: HTML, CSS, JavaScript
- **レンダリング最適化**:
  - ノードの座標管理に `transform` を使用
  - 接続線の描画最適化と矢印位置の自動調整
- **データ管理**:
  - ローカルストレージへの自動保存
  - JSON 形式でのエクスポート・インポート
  - バージョン管理および自動マイグレーション機能
  - 複数タブ間のデータ同期
- **UI/UX**:
  - ツールチップによる視覚的フィードバック
  - ノード変更ボタンの色表示で現在の設定を直感的に把握
  - 右クリックメニューでの各種操作

---

## 🔧 クラス構成

| クラス名        | 説明 |
|----------------|-------------------------------|
| `YaNoteApp`    | アプリ全体の管理、パン操作、右クリックメニューなど |
| `NoteNode`     | ノードオブジェクト（位置管理、テキスト編集、種類切替機能） |
| `Connection`   | 接続線オブジェクト（線種変更、実線/点線切替、色統一） |
| `Logger`       | デバッグ用ログ出力 |
| `Utils`        | 幾何計算、座標処理、ツールチップ管理、バージョン比較 |

---

## 🚀 今後のロードマップ

- 🔍 **ズーム機能の強化**
- 🎨 **ノードの色変更機能**
- 📂 **エクスポート形式の拡張（PNG/SVG など）**
- 📱 **モバイル対応の改善**
- 🔀 **ノードのグループ化機能**
- 🖼 **ミニマップの実装**

---

## 📜 ライセンス

MIT License
