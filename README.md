# yaNote v1.2.11

**yaNote** は、ブラウザ上で動作するジグザグ型ノートアプリです。  
ノード（メモ）を作成し、自由に接続することで情報を視覚的に整理できます。

📌 **[デモページ](https://co-meeting.github.io/yaNote/)**  
👉 **ブラウザで今すぐ試せます！**

## 🚀 アップデート情報 (v1.2.11)

### 主な変更点
- **新規ノード追加ショートカットの実装**  
  - Ctrl/Cmd+Enter によって、現在選択または編集中のノードの直下に、同じ種類の新規ノードを一定のオフセット（60px下）で追加できるようになりました。  
  - この機能により、連続してショートカットを利用することで、下方向に隙間を空けながら新しいノードを追加できます。

- **新規ノードのデフォルト種類の変更**  
  - 何もない場所でダブルクリックして作成されるノードは、従来のデフォルト（standard）から **dotted**（点線）に変更されました。  
  - なお、中心ノードは引き続き `firstNodeType` に基づいて作成され、その他の新規ノードは `defaultNodeType` （ここでは初期値として "dotted" が設定）を使用します。

- **分岐作成時の接続線の固定処理はそのまま**  
  - 分岐作成時、分岐元が「dotted」ノードの場合は接続線が点線・矢印なしに、その他の場合は実線・通常の矢印となる仕様は維持されています。

- **その他UI/UXの改善**  
  - ショートカットの処理をアプリ全体のイベント管理に統合し、Undo/Redo、削除操作との共存を実現しました。  
  - 全体の状態保存・復元の動作は従来通りで、複数タブやローカルストレージでの同期にも対応しています。

## 📌 主な機能

- **ノードの作成・編集**  
  - 空白部分のダブルクリックまたは Ctrl/Cmd+Enter のショートカットで新規ノードを作成。  
  - ノードの編集はクリックで開始、Enter キーを 2 回押下で確定。  
  - Shift+Enter により複数行入力が可能。

- **ノードの接続と分岐作成**  
  - ドラッグ＆ドロップでノード同士を接続。  
  - 分岐作成時は、分岐元のノード種別に応じた接続線が自動的に設定されます。

- **新規ノード追加 (Ctrl/Cmd+Enter)**  
  - 現在編集中または選択中のノードの直下に、同じ種類の新規ノードを追加するショートカットを実装。  
  - 連続操作により、同じ位置の真下に隙間を空けた形でノードが並びます。

- **Undo/Redo、エクスポート／インポート**  
  - 操作履歴の管理により、Undo/Redo が利用可能。  
  - 現在の状態を JSON 形式で保存・復元でき、複数タブ間での同期にも対応。

## 🛠 技術詳細

- **言語:** HTML, CSS, JavaScript  
- **描画:** ノードは HTML、接続線は SVG を使用しており、座標調整には各種ユーティリティ関数を利用。  
- **データ管理:** ローカルストレージによる自動保存、バージョン管理と自動マイグレーション対応。  
- **イベント管理:** Ctrl/Cmd+Enter を含むキーボードショートカットは、アプリ全体のイベント管理内に統合されています。

## 📜 変更全体のまとめ

- **中心ノード:**  
  - 作成時に `firstNodeType` に基づく（v1.2.10 と同様）。

- **新規ノードのデフォルト:**  
  - ダブルクリックによる新規ノードは「dotted」タイプがデフォルト。  
  - その後、ユーザーによる手動変更が可能。

- **ショートカット:**  
  - **Ctrl/Cmd+Enter** で、現在のノードの直下（60px下）に同じ種類の新規ノードを追加する機能を新規実装。  
  - この操作は、既存の Undo/Redo、削除ショートカットと共存し、編集中でも常に有効です。

以上の変更により、ユーザーはより直感的かつ効率的にノードの追加と編集を行えるようになりました。

---

この README.md は、v1.2.10 からの変更点を網羅し、各機能の仕様を平等に記載しています。何かご質問や追加のご要望があればお知らせください。