# yaNote

**yaNote** は、ブラウザ上で動作するジグザグ型ノートアプリです。  
ノード（メモ）を作成し、それらを自由に接続することで、情報を視覚的に整理できます。

📌 **[デモページ（GitHub Pages）](https://co-meeting.github.io/yaNote/)**  
👉 **ブラウザで今すぐ試せます！**  

📖 **[ヘルプページ](help.md)**  
👉 **使い方の詳細はこちら！**  

---

## 🚀 アップデート情報 (v1.2.7)

### 主な変更点
- **右クリックメニューの実装**
  - 選択したノード/線の上で右クリックでコンテキストメニューを表示
  - 「削除」などの操作をメニューから直感的に実行可能
  - 選択されていない領域では標準ブラウザメニューが表示される
- **ノード表示の改善**
  - 改行時のテキスト表示を最適化し、下方向に自然に拡張
  - テキスト編集時のカーソル移動がより直感的に
- **グループ操作の強化**
  - 複数選択したノードの移動時に接続線が正しく追従

### 詳細な更新内容
- **右クリックメニュー**
  - 選択済み要素の上で右クリックするとカスタムメニューが表示
  - コンテキストメニューから「削除」操作が可能に
  - 右クリックドラッグでのパン操作と適切に共存

- **ノード表示の改善**
  - ノードの位置基準を上端に変更し、テキスト表示を安定化
  - 改行時にノードが下方向に自然に拡張
  - 点線表示のシンボルを「‥」に変更し、視覚的に明確に

- **操作性の改良**
  - グループ選択したノードの移動時に関連する線も適切に追従
  - テキスト編集時のカーソル移動が自然に動作

---

## 📌 機能比較

| 機能 | v1.2.6 | v1.2.7 |
|------|------|------|
| 右クリックメニュー | なし | **「削除」などの操作が可能** 🆕 |
| 改行テキスト | 上方向に伸びる | **下方向に自然に伸びる** 🆕 |
| グループ移動 | 線が適切に追従しない場合あり | **接続線が正しく追従** 🆕 |
| 点線表示シンボル | "—" | **"‥"（より直観的）** 🆕 |
| パン操作 | マウスホイール・右クリック | マウスホイール・右クリック |
| ノードテキスト | 複数行対応（Shift+Enter） | 複数行対応（Shift+Enter） |
| 太字機能 | あり | あり |
| 線種切替 | 視覚的アイコン表示 | 視覚的アイコン表示 |

---

## 📌 主な機能

### 📝 ノードの作成・編集
- **ダブルクリックでノードを作成**
- **Enterキー2回押下で編集完了**
- **Shift+Enterで複数行テキスト入力**
- **ドラッグでノードを移動可能**
- **ノードの種類を切り替え可能（標準 / テキストのみ）**
- **太字機能で重要ポイントを強調**

### 📍 ノードの接続
- **ドラッグ＆ドロップでノード同士を接続**
- **未接続の線を自由に移動可能**
- **接続線の端点をドラッグして再接続可能**
- **線種を切り替え可能（4種類から選択）**
- **実線/点線の切り替えが可能**

### 🎯 選択と削除
- **クリックで選択**
- **Shift + クリックで複数選択**
- **Delete / Backspace で削除**
- **右クリックメニューからも削除可能**
- **ラバーバンド選択対応（ドラッグで範囲選択）**

### 🔄 Undo / Redo
- **Ctrl + Z / Cmd + Z** → 元に戻す
- **Ctrl + Y / Cmd + Y** → やり直し

### 🔀 エクスポート・インポート機能
- **ノードと接続情報を JSON 形式でエクスポート**
- **ノードの種類、線種、太字設定もエクスポート時に保存**
- **エクスポート時にファイル名に日付を含める**
- **エクスポートしたデータをインポート可能**
- **古いバージョンのデータを自動マイグレーション**
- **ローカルストレージにも自動保存**
- **複数タブ間のデータ同期対応**

### 🖱️ 直感的な操作
- **右クリックでコンテキストメニュー**
- **右クリック+ドラッグでパン移動**
- **マウスホイールでのパン移動**
- **Shiftキー+ホイールで横方向パン**
- **トラックパッド二本指スクロールでのパン移動**

📖 **詳しい使い方は [ヘルプページ](help.md) をご覧ください！**

---

## 🛠 技術詳細

- **言語**: HTML, CSS, JavaScript
- **レンダリング最適化**:
  - **ノード座標を `transform` で管理**
  - **未接続線のドラッグ移動をサポート**
  - **ノードの選択・移動処理の負荷軽減**
  - **矢印の位置を自動最適化**
- **データ管理**
  - **ローカルストレージ保存**
  - **JSON形式でのエクスポート・インポート**
  - **バージョン管理とマイグレーション機能**
  - **複数タブ間のデータ同期**
- **UI/UX**
  - **ツールチップによる視覚的フィードバック**
  - **ボタン状態による設定表示**
  - **右クリックメニューによる操作性向上**
  - **一貫したデザイン言語**

---

## 🔧 クラス構成

| クラス名        | 説明 |
|---------------|----------------|
| `YaNoteApp`   | アプリ全体の管理、パン操作、右クリックメニュー |
| `NoteNode`    | ノードオブジェクト（位置基準改善、テキスト編集強化） |
| `Connection`  | 接続線オブジェクト（線種変更、点線・実線切替） |
| `Logger`      | デバッグ用ログ出力 |
| `Utils`       | 幾何計算・座標処理・バージョン管理・ツールチップ管理 |

---

## 🚀 今後のロードマップ

- 🔍 **ズーム機能の実装**
- 🎨 **ノードの色変更機能**
- 📂 **エクスポート形式の拡張（PNG / SVG）**
- 📱 **モバイル対応の強化**
- 🔀 **ノードのグループ化**
- 🖼 **ミニマップの実装**

---

## 📜 ライセンス

MIT License
