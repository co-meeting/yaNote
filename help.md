```markdown
# yaNote ヘルプ

**yaNote** は、ブラウザ上で動作するジグザグ型ノートアプリです。  
ノード（メモ）を作成し、それらを自由に接続することで、情報を視覚的に整理できます。  
v1.2.8 では、従来の機能に加え、タイトルフィールドが追加され、エクスポート時のファイル名に反映されるようになりました。

---

## 🚀 基本操作

### ノードの作成・編集

- **ノードの作成**  
  キャンバス上の空白部分を **ダブルクリック** すると、その位置に新しいノードが作成されます。
  
- **ノードの編集**  
  既存のノードを **ダブルクリック** すると編集モードになり、テキストを入力できます。  
  編集中は、**Enter キーを2回押す**か、ノード外をクリックして編集を終了します。  
  ※ 改行を入力する場合は **Shift + Enter** を使用してください。

- **ノードの移動と削除**  
  ノードはドラッグで移動可能です。  
  ノードを選択した状態で **Delete** または **Backspace** キーを押すと削除されます。

### 線の作成・編集

- **線の作成方法**  
  1. **ノード上での作成**：  
     ノードをダブルクリック後、2回目のクリックでマウスボタンを押したままドラッグすると、そのノードから新しい線が作成されます。  
  2. **背景上での作成**：  
     キャンバスの空白部分をダブルクリックしながらドラッグすると、指定位置から線が生成されます。

- **接続の調整**  
  線の端点に表示されるハンドルをドラッグすることで、接続先を変更できます。  
  選択状態で **Delete** または **Backspace** キーを押すと、線も削除されます。

### 選択操作

- **単一・複数選択**  
  要素（ノードまたは線）をクリックすると選択状態になります。  
  ラバーバンド選択（背景上をドラッグ）で複数選択が可能です。

- **選択解除**  
  空白部分をクリックすると、すべての選択が解除されます。

### キャンバスの移動

- **右クリック＋ドラッグ**  
  キャンバス全体を移動できます。

- **マウスホイール操作**  
  - 縦方向はホイールの回転で移動  
  - **Shift + ホイール** で横方向に移動

- **トラックパッド操作**  
  二本指のスクロールで任意方向に移動できます。

### Undo / Redo

- **Ctrl + Z / Cmd + Z**：直前の操作を取り消す  
- **Ctrl + Y / Cmd + Y**：やり直し

---

## 🛠 コントロールパネル

画面右上に常に固定表示されるコントロールパネルでは、以下の操作が可能です。

### タイトルフィールド
- **編集方法**  
  タイトルフィールドは、画面右上のコントロールパネル左側に配置されています。  
  - **ダブルクリック** すると編集状態に入り、テキストが左寄せになります。  
  - **Enter キー** を押す（IME変換中は除く）か、フィールドからフォーカスが外れると編集確定となり、表示時はテキストが右寄せに自動調整されます。  
- **自動反映**  
  中心ノード（初回に作成されるノード）の編集完了時に、その内容が初回のみ自動的にタイトルフィールドに反映されます。  
  その後は、ユーザーが手動でタイトルを編集してください。  
- **デフォルト表示**  
  入力が空の場合は自動的に「無題」と表示され、エクスポート時のファイル名にも反映されます。

### その他のボタン

- **太字ボタン「B」**  
  選択したノードのテキストを太字に切り替えます。

- **ノード種類変更ボタン「◻︎」**  
  ノードの表示形式を、背景と枠線の有無（標準 / テキストのみ）で切り替えます。  
  何も選択していない場合は、新規作成時のデフォルト種類を変更します。

- **線種変更ボタン「→, —, ←, ↔」**  
  線の種類（標準矢印、矢印なし、逆矢印、両方向矢印）を切り替えます。  
  選択していない場合は、デフォルトの線種を変更します。

- **点線切替ボタン「—, ‥」**  
  線を実線と点線で切り替えます。  
  ボタンの表示は線のタイプ（実線または点線）を示します。

- **「新規」ボタン**  
  すべてのノードと線を削除し、初期状態に戻します。

- **「開く」ボタン**  
  保存済みの JSON ファイルをインポートして、状態を復元します。

- **「保存」ボタン**  
  現在の状態を JSON ファイルとしてエクスポートします。  
  ファイル名は、タイトルフィールドの内容（空の場合は「無題」）を先頭に、日付・時刻が付与されます。

---

## 🔍 トラブルシューティング

### キー入力に関する問題
- **BackSpace キーが効かない**  
  グローバルなキーイベントリスナーが BackSpace をキャンセルしている可能性があります。  
  入力フィールド（input や textarea）がフォーカスされている場合は、BackSpace のキャンセル処理を行わないように設定してください。

- **Enter キーでのタイトル編集確定中にIME変換が途中で確定してしまう**  
  `e.isComposing` を利用して、IME変換中は Enter キーの処理を無視するように調整してください。

### ツールチップの位置ずれ
- ツールチップの CSS を `position: fixed` に変更することで、コントロールパネル（固定表示）と同じビューポート基準で表示されるようになります。

---

## 🔧 FAQ

**Q: タイトルフィールドでテキストを編集中、なぜ BackSpace キーで文字が削除できないのですか？**  
A: グローバルのキーイベントで BackSpace をキャンセルしている場合があります。入力フィールドがフォーカスされている場合はキャンセルしないように修正してください。

**Q: タイトルフィールドの編集確定は Enter キーでもできるようにしたいのですが、IME変換中に確定してしまうのはどうすればよいですか？**  
A: Enter キーイベント内で `e.isComposing` プロパティをチェックし、変換中の場合は確定処理をスキップするように修正します。

**Q: コントロールパネルが画面右上に固定されず、ツールチップの位置がずれて表示されるのはなぜですか？**  
A: コントロールパネルの CSS を `position: fixed` に変更することで、画面右上に固定され、ツールチップも同じ基準で表示されるようになります。

---

## 📖 さらに詳しい使い方

- **詳細な操作方法や各ボタンの機能について**は、アプリ内のツールチップとヘルプメニューをご参照ください。  
- **FAQ** セクションも合わせて、よくある問題の解決策を確認してください。

Happy Noting!
```