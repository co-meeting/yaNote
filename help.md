# yaNote ヘルプ (v1.2.12)

**yaNote** は、ブラウザ上で動作するジグザグ型ノートアプリです。  
このヘルプでは、yaNote の基本操作と、v1.2.12 で追加・改善された機能について解説します。

---

## 1. 基本操作

### ノードの作成・編集
- **ノードの作成**:  
  - キャンバスの空白部分をダブルクリックすると、その位置に新しいノードが作成されます。  
    ※ v1.2.12 では、新規にダブルクリックで作成されるノードはデフォルトで **点線 (dotted)** タイプになります。
  - **Ctrl/Cmd+Enter ショートカット**:  
    - 現在選択または編集中のノードがある場合、そのノードの直下（約60px下）に、同じ種類の新規ノードを追加できます。  
    - 連続操作することで、下方向に隙間を空けながらノードを追加できます。

- **ノードの編集**:  
  - ノードをクリックするか、選択状態で **e** キーを押すことで編集モードに入ります。  
  - 編集中は、元の Markdown 記法で入力されたテキスト（改行は `<br>` に変換）がプレーンテキストとして表示され、編集完了時（Enter キー2回または他のノード選択時）に自動的に Markdownリンク変換が実行されます。  
  - Shift+Enter で改行も入力可能です。

### ノードの移動・削除
- **移動**: ノードはドラッグ操作で自由に移動できます。  
- **削除**:  
  - 選択状態のノードは Backspace または Delete キーで削除可能です。

---

## 2. ノードの種類

yaNote では以下のノードタイプが利用可能です：

- **標準 (standard)**  
  - 白背景、通常の枠線
- **テキスト専用 (text-only)**  
  - 背景・枠線なし（主に分岐用としても利用）
- **グレー (grey)**  
  - 背景 #595959、文字色 #FFFFFF、枠線なし
- **赤 (red)**  
  - 背景 #BF1304、文字色 #FFFFFF、枠線なし
- **点線 (dotted)**  
  - 背景が薄いグレー (#f0f0f0) で、枠線が点線

※ 中心ノードは `firstNodeType` に基づいて作成され、その他の新規ノードは `defaultNodeType` （v1.2.12 では初期値として "dotted" が設定）になります。  
また、Ctrl/Cmd+Enter による新規追加の場合は、現在のノードの種類が引き継がれます。

---

## 3. ノードの接続と分岐作成

- **接続**:  
  ノード同士はドラッグ＆ドロップで接続できます。
- **分岐作成**:  
  - ノードからドラッグすることで分岐を作成できます。  
  - 分岐作成時、分岐元ノードの種類に応じた接続線が固定されます。  
    - **点線 (dotted) ノードの場合**: 接続線は点線で矢印なしに固定されます。  
    - **それ以外の場合**: 接続線は実線で通常の矢印に固定されます。

---

## 4. Markdownリンク記法による自動変換

v1.2.12 では、以下の機能が追加されています。

- **Markdown記法のリンク変換**:  
  ノード内に `[リンクテキスト](https://example.com)` のような正確な Markdown 記法でリンクが記述されている場合、編集完了時に自動的に HTML の `<a>` タグに変換されます。  
  - リンクは `target="_blank"` が付与され、新しいタブで開かれます。
  - 改行は `<br>` タグに変換され、テキストのレイアウトが保持されます。
  - 記法に誤りがある場合は変換されず、プレーンテキストとして表示されます。

---

## 5. キーボードショートカット

- **Ctrl/Cmd+Enter (新規ノード追加)**:  
  現在選択または編集中のノードの直下（約60px下）に、同じ種類の新規ノードを追加します。

- **e キー (編集モード切替)**:  
  ノードが選択されている状態で「e」キーを押すと、そのノードが編集モードに切り替わります。  
  ※ すでに他のノードが選択された場合、編集中のノードは自動的に編集完了となります。

- **Ctrl/Cmd+Z / Ctrl/Cmd+Y**:  
  Undo/Redo 操作。

- **Backspace / Delete**:  
  選択中のノードの削除。

---

## 6. 状態管理

- **自動保存**:  
  各操作終了時に、ノード、接続線、キャンバスのパン・ズーム状態がローカルストレージに保存されます。

- **エクスポート／インポート**:  
  現在の状態を JSON 形式でエクスポート／インポートでき、ファイル名にはタイトルと日時が付与されます。

- **多タブ同期**:  
  複数タブ間で状態が更新された場合、最新の状態が自動的に同期されます。

---

このヘルプは、v1.2.11 からのアップデートに伴い、新たに追加された Markdown 記法のリンク変換機能や「e」キーによる編集切替、ノードの表示レイアウトの改善などを中心に説明しています。  
その他の基本機能については、従来と同様の操作でご利用いただけます。  
何かご不明点やご意見があればお知らせください。
