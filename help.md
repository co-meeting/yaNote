# yaNote マニュアル

## 概要
**yaNote** は、ブラウザ上で動作するノート作成ツールです。無限キャンバス上でノードを配置し、接続線を描画することで、アイデア整理や情報管理を行うことができます。

## 主な機能
- **無限キャンバス**：広大な作業エリアで自由にノートを作成可能
- **ノード作成**：ダブルクリックで新しいノードを追加
- **ノード編集**：ノードをクリックしてテキスト編集可能
- **ノード移動**：ドラッグ＆ドロップで自由に配置変更
- **ノード接続**：ドラッグ操作でノード同士を接続
- **選択と削除**：複数選択と削除機能
- **ズーム・パン**：キャンバスの拡大縮小や移動が可能
- **ローカルストレージ保存**：作成したノートが自動保存される
- **エクスポート・インポート**：JSON形式でデータの保存・読み込み
- **操作の取り消し・やり直し**：Undo / Redo に対応
- **ノードの種類変更**：標準ノードとテキストのみノードの切り替え可能
- **グリッド背景**：視覚的に整理しやすい背景を追加

## 操作方法

### ノードの作成
1. キャンバス上の任意の場所を**ダブルクリック**すると新しいノードが作成されます。
2. 作成直後はテキスト編集モードになるので、ノードに名前を付けます。

### ノードの編集
- ノードを**ダブルクリック**するとテキスト編集モードになります。
- 編集を終了するには **Enter キー** を2回押すか、ノード外をクリックします。

### ノードの移動
- ノードを**ドラッグ＆ドロップ**して自由に移動できます。
- **複数選択**した場合、グループで移動できます。

### ノードの接続
1. ノードを **ダブルクリック後にドラッグ** すると、新しいノードが作成され、接続されます。
2. 既存のノード同士を接続する場合、一方のノードを **ドラッグ** して別のノードの上にドロップします。

### ノードの選択と削除
- **単体選択**：ノードをクリック
- **複数選択**：ドラッグで矩形選択
- **削除**：選択したノードや接続線を `Delete` または `Backspace` キーで削除

### ノードの種類変更
- `ノード種類変更` ボタンをクリックすると、選択したノードを **標準ノード** と **テキストのみノード** に切り替え可能。
- グループ選択時は、一括で切り替え。

### キャンバスの操作
- **パン（移動）**：右クリックしたままドラッグ
- **ズーム**：マウスホイールを回転
- **グリッド背景**：視認性向上のために追加。

### データの保存・読み込み

#### 自動保存
作成したノートはローカルストレージに自動保存されます。

#### エクスポート
1. `エクスポート` ボタンをクリック
2. JSON ファイルとして保存される

#### インポート
1. `インポート` ボタンをクリック
2. JSON ファイルを選択して読み込む

#### バージョン互換性 (v1.2.3.1 以降)
- 古いバージョンのデータを読み込む際に自動的にマイグレーション処理を実行
- バージョン情報がない古いデータにも対応
- 将来のバージョンからのインポートに対する安全対策を実装

### 操作の取り消し・やり直し
- `Ctrl + Z` / `Cmd + Z`：操作の取り消し（Undo）
- `Ctrl + Y` / `Cmd + Y`：操作のやり直し（Redo）

## 追加機能
- **リセットボタン**：全データを初期状態に戻す
- **他タブ同期**：複数タブで開いた場合、自動的に変更を同期
- **ロギング機能**：開発者向けのデバッグログ出力
- **ノードの種類変更**：標準ノードとテキストのみノードの切り替え可能
- **データマイグレーション**：異なるバージョン間でのデータ互換性を保証

## 注意事項
- ローカルストレージに保存されるため、異なるブラウザやPCではデータを共有できません。
- インポート・エクスポート機能を活用し、定期的なバックアップを推奨します。
- v1.2.3.1以降では、古いバージョンのデータも正しく読み込めますが、将来のバージョンへの完全な互換性は保証されません。

## バージョン情報
- 現在のバージョン：**v1.2.3.1**
- 前回のバージョン：**v1.2.3**

## 更新履歴

### v1.2.3.1
- データ互換性の強化：異なるバージョン間でのデータ互換性を向上
- バージョン管理機能：エクスポートデータにバージョン情報を明示的に付与
- データマイグレーション処理：古いバージョンのデータを自動的に最新形式に変換
- エラー処理とログ機能の強化：わかりやすいエラーメッセージとデバッグログの改善

### v1.2.3
- 背景にグリッドパターンを追加
- ノードの種類を切り替え可能に（標準ノード／テキストのみノード）
- ノードのデフォルト種類を設定機能
- UIの改良（ノード種類変更ボタンの追加）
- エクスポート時にノードの種類も保存
- パフォーマンス最適化